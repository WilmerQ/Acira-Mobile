{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/models/usuarioRegistro.ts","../../src/pages/login/login.ts","../../src/models/usuario.ts"],"names":[],"mappings":"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","file":"2.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPage } from './login';\nimport { HttpModule } from '@angular/http';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    HttpModule,\n    IonicPageModule.forChild(LoginPage),\n  ],\n  exports:[\n    LoginPage,\n  ]\n})\nexport class LoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","export class usuarioRegistro {\r\n\r\n    constructor(nombrecompleto: string,\r\n        identificacion: number,\r\n        celular: number,\r\n        email: string,\r\n        nombreusuario: string,\r\n        contrasena: string,\r\n        codigofamiliar: string,\r\n        idSesion: number,\r\n        uuidDoc: string) {\r\n        this.nombrecompleto = nombrecompleto;\r\n        this.identificacion = identificacion;\r\n        this.celular = celular;\r\n        this.email = email;\r\n        this.nombreusuario = nombreusuario;\r\n        this.contrasena = contrasena;\r\n        this.codigofamiliar = codigofamiliar;\r\n        this.idSesion = idSesion;\r\n        this.uuidDocumento = uuidDoc;\r\n\r\n    }\r\n\r\n    nombrecompleto: string;\r\n    identificacion: number;\r\n    celular: number;\r\n    email: string;\r\n    nombreusuario: string;\r\n    contrasena: string;\r\n    codigofamiliar: string;\r\n    idSesion: number;\r\n    uuidDocumento: string;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/usuarioRegistro.ts","import { usuarioRegistro } from './../../models/usuarioRegistro';\nimport { OperacionesLocalStorageProvider } from './../../providers/operaciones-local-storage/operaciones-local-storage';\nimport { OperacionesHttpProvider } from './../../providers/operaciones-http/operaciones-http';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController, ToastController } from 'ionic-angular';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { Usuario } from '../../models/usuario';\nimport { AndroidPermissions } from '@ionic-native/android-permissions';\nimport * as Raven from 'raven-js';\n//import { Autostart } from '@ionic-native/autostart';\n\n/**\n * Generated class for the LoginPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n})\nexport class LoginPage {\n\n  myForm: FormGroup;\n  desactivarElementos: boolean = false;\n  paginaRegistro: any;\n\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    public operacionesLogin: OperacionesHttpProvider,\n    public localStorage: OperacionesLocalStorageProvider,\n    public loadingController: LoadingController,\n    public toastCtl: ToastController,\n    private androidPermissions: AndroidPermissions,\n    public fb: FormBuilder) {\n    this.paginaRegistro = 'RegistroPage';\n    this.myForm = this.fb.group({\n      nombreusuario: ['', [Validators.required, Validators.pattern(/^[a-z0-9_-]{3,16}$/)]],\n      contrasena: ['', [Validators.pattern(/^(?=\\w*\\d)(?=\\w*[A-Z])(?=\\w*[a-z])\\S{6,16}$/)]]\n    });\n  }\n\n  ionViewCanEnter() {\n    let idDispositivo = this.localStorage.getObject(\"idDispositivo\");\n    if (idDispositivo == null) {\n      this.localStorage.guardar(\"idDispositivo\", \"\" + Math.floor(Math.random() * 999999) + 1);\n    }\n\n    let temp: string = this.localStorage.getObject(\"usuarioLogin\");\n    let usuarioActivo: usuarioRegistro = JSON.parse(temp);\n    if (usuarioActivo != null) {\n      //this.navCtrl.setRoot(\"PrincipalPage\");\n      Raven.setUserContext({\n        nombrecompleto: usuarioActivo.nombrecompleto,\n        identificacion: usuarioActivo.identificacion,\n        celular: usuarioActivo.celular,\n        email: usuarioActivo.email,\n        nombreusuario: usuarioActivo.nombreusuario,\n        codigofamiliar: usuarioActivo.codigofamiliar,\n        idSesion: usuarioActivo.idSesion\n      });\n      this.navCtrl.setRoot(\"TabsPage\");\n    } else {\n      this.permisos();\n    }\n  }\n\n  doLogin() {\n    let nombre: string = this.myForm.get('nombreusuario').value;\n    let contrasena: string = this.myForm.get('contrasena').value;\n    if (nombre != '' && contrasena != '') {\n      let usuario = new Usuario(this.myForm.get('nombreusuario').value, this.myForm.get('contrasena').value);\n      let loading = this.loadingController.create({\n        spinner: 'ios',\n        content: 'Por favor espere...',\n        dismissOnPageChange: true\n      });\n      loading.present();\n      this.desactivarElementos = true;\n      this.operacionesLogin.login(usuario)\n        .then(data => {\n          let usuariotemp: usuarioRegistro = new usuarioRegistro(\n            data.nombrecompleto,\n            data.numeroIdentificacion,\n            data.telefono,\n            data.email,\n            data.nombreUsuario,\n            null,\n            data.codigofamiliar,\n            data.idSesion,\n            null\n          );\n          this.localStorage.guardarObjeto(\"usuarioLogin\", usuariotemp);\n          loading.dismiss;\n          Raven.setUserContext({\n            nombrecompleto: usuariotemp.nombrecompleto,\n            identificacion: usuariotemp.identificacion,\n            celular: usuariotemp.celular,\n            email: usuariotemp.email,\n            nombreusuario: usuariotemp.nombreusuario,\n            codigofamiliar: usuariotemp.codigofamiliar,\n            idSesion: usuariotemp.idSesion\n          });\n          //this.navCtrl.setRoot(\"PrincipalPage\");\n          this.navCtrl.setRoot(\"TabsPage\");\n        })\n        .catch(error => {\n          Raven.captureException(error);\n          loading.dismiss();\n          this.desactivarElementos = false;\n          if (error._body === \"Usuario y/o Contraseña incorrecto\" ||\n            error._body === \"Su grupo familiar se encuentra desactivado, favor revise el estado de su pago mensual\" ||\n            error._body === \"Problema interno del servidor\") {\n            let toast = this.toastCtl.create({\n              message: error._body,\n              duration: 3000,\n              position: 'middle'\n            });\n            toast.present();\n          } else {\n            let toast = this.toastCtl.create({\n              message: \"Error desconocido, verifique su conexión a internet\",\n              duration: 3000,\n              position: 'middle'\n            });\n            toast.present();\n          }\n        })\n    } else {\n      let toast = this.toastCtl.create({\n        message: \"Ingrese sus credenciales\",\n        duration: 3000,\n        position: 'middle'\n      });\n      toast.present();\n    }\n  }\n\n  omar() {\n    this.operacionesLogin.metodoOmar()\n      .then(data => {\n        console.log(JSON.stringify(data))\n      })\n      .catch(error => {\n        console.log(error);\n      })\n  }\n\n  permisos() {\n    this.androidPermissions.requestPermissions([\n      this.androidPermissions.PERMISSION.CAMERA,\n      this.androidPermissions.PERMISSION.RECORD_AUDIO,\n      this.androidPermissions.PERMISSION.WRITE_EXTERNAL_STORAGE\n    ]);\n  }\n\n  setFilteredItems() {\n    let nombre: string = this.myForm.get('nombreusuario').value;\n    nombre = nombre.trim();\n    this.myForm.get(\"nombreusuario\").setValue(nombre.toLowerCase());\n  }\n\n  setFilterPassword() {\n    let nombre: string = this.myForm.get('contrasena').value;\n    nombre = nombre.trim();\n    this.myForm.get(\"contrasena\").setValue(nombre);\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts","export class Usuario {\r\n\r\n    constructor(nombre: String, contrasena: String) {\r\n        this.nombre = nombre\r\n        this.contrasena = contrasena\r\n    }\r\n\r\n    nombre: String\r\n    contrasena: String\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/usuario.ts"],"sourceRoot":""}