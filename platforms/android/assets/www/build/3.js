webpackJsonp([3],{672:function(n,l,t){"use strict";function o(n){return r._19(0,[(n()(),r.Z(0,0,null,null,9,"ion-col",[["class","col"],["col-auto",""],["no-margin",""],["no-padding",""]],null,null,null,null,null)),r.Y(1,16384,null,0,A.a,[],null,null),(n()(),r._18(-1,null,["\n        "])),(n()(),r.Z(3,0,null,null,5,"button",[["ion-fab",""],["large",""],["mini",""],["no-margin",""],["no-padding",""]],null,[[null,"click"]],function(n,l,t){var o=!0;if("click"===l){o=!1!==n.component.presentImage(r._11(n.parent,30))&&o}return o},Y.b,Y.a)),r.Y(4,49152,[[2,4]],0,C.a,[P.a,r.j,r.z],null,null),(n()(),r._18(-1,0,["\n          "])),(n()(),r.Z(6,0,null,0,1,"ion-icon",[["name","ios-image"],["role","img"]],[[2,"hide",null]],null,null,null,null)),r.Y(7,147456,null,0,z.a,[P.a,r.j,r.z],{name:[0,"name"]},null),(n()(),r._18(-1,0,["\n        "])),(n()(),r._18(-1,null,["\n      "]))],function(n,l){n(l,7,0,"ios-image")},function(n,l){n(l,6,0,r._11(l,7)._hidden)})}function i(n){return r._19(0,[(n()(),r.Z(0,0,null,null,5,"button",[["ion-fab",""],["large",""],["mini",""],["no-margin",""],["no-padding",""]],null,[[null,"click"]],function(n,l,t){var o=!0;if("click"===l){o=!1!==n.component.playAudio()&&o}return o},Y.b,Y.a)),r.Y(1,49152,[[2,4]],0,C.a,[P.a,r.j,r.z],null,null),(n()(),r._18(-1,0,["\n          "])),(n()(),r.Z(3,0,null,0,1,"ion-icon",[["name","ios-play"],["role","img"]],[[2,"hide",null]],null,null,null,null)),r.Y(4,147456,null,0,z.a,[P.a,r.j,r.z],{name:[0,"name"]},null),(n()(),r._18(-1,0,["\n        "]))],function(n,l){n(l,4,0,"ios-play")},function(n,l){n(l,3,0,r._11(l,4)._hidden)})}function a(n){return r._19(0,[(n()(),r.Z(0,0,null,null,5,"button",[["ion-fab",""],["large",""],["mini",""],["no-margin",""],["no-padding",""]],null,[[null,"click"]],function(n,l,t){var o=!0;if("click"===l){o=!1!==n.component.stopAudio()&&o}return o},Y.b,Y.a)),r.Y(1,49152,[[2,4]],0,C.a,[P.a,r.j,r.z],null,null),(n()(),r._18(-1,0,["\n          "])),(n()(),r.Z(3,0,null,0,1,"ion-icon",[["name","ios-pause"],["role","img"]],[[2,"hide",null]],null,null,null,null)),r.Y(4,147456,null,0,z.a,[P.a,r.j,r.z],{name:[0,"name"]},null),(n()(),r._18(-1,0,["\n        "]))],function(n,l){n(l,4,0,"ios-pause")},function(n,l){n(l,3,0,r._11(l,4)._hidden)})}function u(n){return r._19(0,[(n()(),r.Z(0,0,null,null,8,"ion-col",[["class","col"],["col-auto",""],["no-margin",""],["no-padding",""]],null,null,null,null,null)),r.Y(1,16384,null,0,A.a,[],null,null),(n()(),r._18(-1,null,["\n        "])),(n()(),r.U(16777216,null,null,1,null,i)),r.Y(4,16384,null,0,L.i,[r.I,r.F],{ngIf:[0,"ngIf"]},null),(n()(),r._18(-1,null,["\n        "])),(n()(),r.U(16777216,null,null,1,null,a)),r.Y(7,16384,null,0,L.i,[r.I,r.F],{ngIf:[0,"ngIf"]},null),(n()(),r._18(-1,null,["\n      "]))],function(n,l){var t=l.component;n(l,4,0,!t.reproduciendoAudio);n(l,7,0,t.reproduciendoAudio)},null)}function e(n){return r._19(0,[(n()(),r._18(-1,null,["\n"])),(n()(),r.Z(1,0,null,null,22,"ion-header",[],null,null,null,null,null)),r.Y(2,16384,null,0,E.a,[P.a,r.j,r.z,[2,O.a]],null,null),(n()(),r._18(-1,null,["\n  "])),(n()(),r.Z(4,0,null,null,18,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,S.b,S.a)),r.Y(5,49152,null,0,M.a,[V.a,[2,O.a],[2,F.a],P.a,r.j,r.z],null,null),(n()(),r._18(-1,3,["\n    "])),(n()(),r.Z(7,0,null,3,2,"ion-title",[["mode","ios"]],null,[[null,"click"]],function(n,l,t){var o=!0;if("click"===l){o=!1!==n.component.informacion()&&o}return o},B.b,B.a)),r.Y(8,49152,null,0,q.a,[P.a,r.j,r.z,[2,T.a],[2,M.a]],{mode:[0,"mode"]},null),(n()(),r._18(-1,0,["Información Aquí"])),(n()(),r._18(-1,3,["\n    "])),(n()(),r.Z(11,0,null,2,10,"ion-buttons",[["right",""]],null,null,null,null,null)),r.Y(12,16384,null,1,U.a,[P.a,r.j,r.z,[2,T.a],[2,M.a]],null,null),r._16(603979776,1,{_buttons:1}),(n()(),r._18(-1,null,["\n      "])),(n()(),r.Z(15,0,null,null,5,"button",[["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(n,l,t){var o=!0;if("click"===l){o=!1!==n.component.presentPopover(t)&&o}return o},W.b,W.a)),r.Y(16,1097728,[[1,4]],0,X.a,[[8,""],P.a,r.j,r.z],null,null),(n()(),r._18(-1,0,["\n        "])),(n()(),r.Z(18,0,null,0,1,"ion-icon",[["name","more"],["role","img"]],[[2,"hide",null]],null,null,null,null)),r.Y(19,147456,null,0,z.a,[P.a,r.j,r.z],{name:[0,"name"]},null),(n()(),r._18(-1,0,["\n      "])),(n()(),r._18(-1,null,["\n    "])),(n()(),r._18(-1,3,["\n  "])),(n()(),r._18(-1,null,["\n"])),(n()(),r._18(-1,null,["\n\n"])),(n()(),r.Z(25,0,null,null,33,"ion-content",[["no-margin",""],["no-padding",""]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,N.b,N.a)),r.Y(26,4374528,null,0,R.a,[P.a,H.a,K.a,r.j,r.z,V.a,G.a,r.u,[2,O.a],[2,F.a]],null,null),(n()(),r._18(-1,1,["\n  "])),(n()(),r.Z(28,0,null,1,0,"div",[["id","map"]],null,null,null,null,null)),(n()(),r._18(-1,1,["\n  "])),(n()(),r.Z(30,0,[["myImage",1]],1,0,"img",[],[[8,"src",4],[8,"hidden",0]],null,null,null,null)),(n()(),r._18(-1,1,["\n\n  "])),(n()(),r.Z(32,0,null,0,25,"ion-fab",[["bottom",""],["class","Absolute-Center"],["no-margin",""],["no-padding",""]],null,null,null,J.b,J.a)),r.Y(33,1228800,null,2,Q.a,[H.a],null,null),r._16(603979776,2,{_mainButton:0}),r._16(603979776,3,{_fabLists:1}),(n()(),r._18(-1,0,["\n    "])),(n()(),r.Z(37,0,null,0,19,"ion-row",[["class","row"],["no-margin",""],["no-padding",""]],null,null,null,null,null)),r.Y(38,16384,null,0,$.a,[],null,null),(n()(),r._18(-1,null,["\n      "])),(n()(),r.Z(40,0,null,null,9,"ion-col",[["class","col"],["col-auto",""],["no-margin",""],["no-padding",""]],null,null,null,null,null)),r.Y(41,16384,null,0,A.a,[],null,null),(n()(),r._18(-1,null,["\n        "])),(n()(),r.Z(43,0,null,null,5,"button",[["ion-fab",""],["large",""],["mini",""],["no-margin",""],["no-padding",""]],null,[[null,"click"]],function(n,l,t){var o=!0;if("click"===l){o=!1!==n.component.informacion()&&o}return o},Y.b,Y.a)),r.Y(44,49152,[[2,4]],0,C.a,[P.a,r.j,r.z],null,null),(n()(),r._18(-1,0,["\n          "])),(n()(),r.Z(46,0,null,0,1,"ion-icon",[["name","ios-information-circle-outline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),r.Y(47,147456,null,0,z.a,[P.a,r.j,r.z],{name:[0,"name"]},null),(n()(),r._18(-1,0,["\n        "])),(n()(),r._18(-1,null,["\n      "])),(n()(),r._18(-1,null,["\n      "])),(n()(),r.U(16777216,null,null,1,null,o)),r.Y(52,16384,null,0,L.i,[r.I,r.F],{ngIf:[0,"ngIf"]},null),(n()(),r._18(-1,null,["\n      "])),(n()(),r.U(16777216,null,null,1,null,u)),r.Y(55,16384,null,0,L.i,[r.I,r.F],{ngIf:[0,"ngIf"]},null),(n()(),r._18(-1,null,["\n    "])),(n()(),r._18(-1,0,["\n  "])),(n()(),r._18(-1,1,["\n"]))],function(n,l){var t=l.component;n(l,8,0,"ios");n(l,19,0,"more");n(l,47,0,"ios-information-circle-outline");n(l,52,0,t.buttonFabImagen);n(l,55,0,t.audioDisponible)},function(n,l){var t=l.component;n(l,4,0,r._11(l,5)._hidden,r._11(l,5)._sbPadding);n(l,18,0,r._11(l,19)._hidden);n(l,25,0,r._11(l,26).statusbarPadding,r._11(l,26)._hasRefresher);n(l,30,0,t.urlImagen(),1==t.imagenVisible);n(l,46,0,r._11(l,47)._hidden)})}Object.defineProperty(l,"__esModule",{value:!0});var r=t(2),s=(t(0),t(31),t(370)),c=t(168),d=t(110),p=t(174),g=(t(372),t(171)),m=t(172),h=t(175),f=t(173),b=function(){function n(n,l,t,o,i,a,u,e,r,s,c,d,p){var g=this;this.navCtrl=n,this.geolocation=l,this.diagnostico=t,this.localstorage=o,this.loadingController=i,this.popoverCtrl=a,this.alertCtrl=u,this.imageViewerCtrl=e,this.file=r,this.media=s,this.platform=c,this.transfer=d,this.navParams=p,this.polylineExistente=!1,this.bounds=new google.maps.LatLngBounds,this.contador=1,this.rutaExistente=!1,this.directionsService=null,this.directionsDisplay=null,this.imagenVisible=!1,this.aux=!0,this.duracion="Solo disponible con ruta de automóvil habilitada",this.distancia="Solo disponible con ruta de automóvil habilitada",this.buttonFabImagen=!1,this.audioDisponible=!1,this.reproduciendoAudio=!1,this.changeLocationState=function(n){g.diagnostico.isLocationEnabled().then(function(n){n?(g.loading.dismiss(),g.polylineExistente=!1,g.contador=1,g.aux=!0,g.rutaExistente=!1,g.carga()):(g.loading=g.loadingController.create({spinner:"ios",content:"Por favor encienda la ubicación en su dispositivo",dismissOnPageChange:!0}),g.loading.present())}).catch(function(n){return f.captureException(n)})},this.loading=this.loadingController.create({spinner:"ios",content:"Por favor encienda la ubicación en su dispositivo",dismissOnPageChange:!0});var m=o.getObject("rutadirecta");this.rutaDirecta=m.indexOf("true")>=0,m=o.getObject("rutaauto"),this.rutaAuto=m.indexOf("true")>=0,this.directionsService=new google.maps.DirectionsService,this.directionsDisplay=new google.maps.DirectionsRenderer,this._imageViewerCtrl=e}return n.prototype.ionViewDidEnter=function(){var n=this;this.diagnostico.isLocationEnabled().then(function(l){l?(n.loading.dismiss(),n.carga()):n.loading.present()}).catch(function(n){return f.captureException(n)}),this.diagnostico.registerLocationStateChangeHandler(this.changeLocationState)},n.prototype.carga=function(){if(this.objeto=this.navParams.get("notificacion"),null!=this.objeto){this.localstorage.delete("notificacion1"),null!=this.objeto.additionalData.panico.uuidImagen&&(this.buttonFabImagen=!0),null!=this.objeto.additionalData.panico.uuidAudio&&this.downloadAudio();this.loadMap(void 0)}},n.prototype.ionViewWillLeave=function(){this.rutaAuto=!1,this.rutaDirecta=!1},n.prototype.presentPopover=function(n){var l=this,t=this.popoverCtrl.create("PopoverPage",{tipo:"mapa"});t.onDidDismiss(function(){l.polylineExistente=!1,l.rutaExistente=!1,l.aux=!0;var n=l.localstorage.getObject("rutadirecta");l.rutaDirecta=n.indexOf("true")>=0,n=l.localstorage.getObject("rutaauto"),l.rutaAuto=n.indexOf("true")>=0,l.contador=1,l.carga()}),t.present({ev:n})},n.prototype.loadMap=function(n){var l,t,o=this;void 0===n?(l=11.234722,t=-74.18995):(l=n.coords.latitude,t=n.coords.longitude);var i=document.getElementById("map"),a={lat:l,lng:t};this.map=new google.maps.Map(i,{center:a,zoom:17,mapTypeControl:!1,mapTypeId:google.maps.MapTypeId.hybrid,myLocationButton:!0,streetViewControl:!1,zoomControl:!1,maxZoom:19});this.marker=new google.maps.Marker({map:this.map,icon:"assets/icon/bluecircle.png",title:"Tu ubicación actual"}),google.maps.event.addListenerOnce(this.map,"idle",function(){o.geolocation.watchPosition({enableHighAccuracy:!0,maximumAge:0}).filter(function(n){return void 0!==n.coords}).subscribe(function(l){var t=new google.maps.LatLng(l.coords.latitude,l.coords.longitude);if(o.ubicacionActual=new google.maps.LatLng(l.coords.latitude,l.coords.longitude),o.marker.setPosition(t),o.bounds.extend(t),o.bounds.extend(n.getPosition()),o.rutaDirecta||o.rutaAuto||!o.aux||(o.map.fitBounds(o.bounds),o.aux=!1),o.rutaDirecta){o.polylineExistente?o.flightPath.setMap(null):o.map.fitBounds(o.bounds);var i=[o.ubicacionActual,{lat:o.objeto.additionalData.panico.latitud,lng:o.objeto.additionalData.panico.longitud}];o.flightPath=new google.maps.Polyline({path:i,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2}),o.flightPath.setMap(o.map),o.polylineExistente=!0}o.rutaAuto&&(o.rutaExistente||o.map.fitBounds(o.bounds),500==o.contador||10==o.contador?(o.contador=11,o.directionsDisplay.setMap(o.map),o.directionsService.route({origin:new google.maps.LatLng(l.coords.latitude,l.coords.longitude),destination:new google.maps.LatLng(o.objeto.additionalData.panico.latitud,o.objeto.additionalData.panico.longitud),travelMode:google.maps.TravelMode.DRIVING,avoidTolls:!0},function(n,l){l===google.maps.DirectionsStatus.OK?(o.distancia=n.routes[0].legs[0].distance.text,o.duracion=n.routes[0].legs[0].duration.text,o.directionsDisplay.setDirections(n),o.rutaExistente=!0):alert("No se pudieron mostrar las indicaciones debido a: "+l)})):o.contador=o.contador+1)});var n=new google.maps.Marker({position:{lat:o.objeto.additionalData.panico.latitud,lng:o.objeto.additionalData.panico.longitud},map:o.map,icon:"assets/icon/cuidado.png",title:"Evento reportado aquí"}),l=new google.maps.InfoWindow({content:"Evento reportado aquí",position:{lat:o.objeto.additionalData.panico.latitud,lng:o.objeto.additionalData.panico.longitud}});n.addListener("click",function(){l.open(this.map)}),function(n,l){var t=new google.maps.InfoWindow({content:l});n.addListener("click",function(){t.open(n.get("map"),n)})}(o.marker,o.marker.title),i.classList.add("show-map")})},n.prototype.informacion=function(){this.alertCtrl.create({title:this.objeto.additionalData.panico.tipo,message:this.objeto.message+" <br><br><strong>-El punto azul en el mapa es su ubicacion actual. <br>-El circulo rojo es la zona donde se reporto el evento.<strong><br><br>-Duración:<strong> "+this.duracion+"<br>-Distancia:<strong> "+this.distancia,buttons:[{text:"OK",handler:function(){}}]}).present()},n.prototype.presentImage=function(n){this._imageViewerCtrl.create(n,{enableBackdropDismiss:!0}).present()},n.prototype.urlImagen=function(){var n="http://via.placeholder.com/150?text=code+trigger";return this.con=new s.a,null!=this.con&&null!=this.objeto&&(n=this.con.urlServletImagen+this.objeto.additionalData.panico.uuidImagen),n},n.prototype.downloadAudio=function(){var n=this,l=this.con.urlServletAudio+this.objeto.additionalData.panico.uuidAudio;this.transfer.create().download(l,this.file.dataDirectory+"voz.3gp").then(function(l){n.audioDisponible=!0},function(n){})},n.prototype.playAudio=function(){var n=this;this.platform.is("ios")?(this.filePath=this.file.dataDirectory+"voz.3gp",this.audio=this.media.create(this.filePath)):this.platform.is("android")&&(this.filePath=this.file.dataDirectory+"voz.3gp",this.audio=this.media.create(this.filePath)),this.audio.play(),this.audio.setVolume(.9),this.reproduciendoAudio=!0,this.audio.onStatusUpdate.subscribe(function(l){console.log("aqui en el status del audio "+l),4==l&&(n.reproduciendoAudio=!1)})},n.prototype.stopAudio=function(){this.audio.pause(),this.reproduciendoAudio=!1},n}(),_=function(){return function(){}}(),v=t(360),y=t(361),j=t(362),D=t(363),x=t(364),I=t(365),w=t(366),Z=t(367),k=t(368),A=t(176),Y=t(681),C=t(75),P=t(3),z=t(53),L=t(23),E=t(112),O=t(7),S=t(369),M=t(47),V=t(12),F=t(29),B=t(677),q=t(169),T=t(74),U=t(185),W=t(52),X=t(30),N=t(676),R=t(36),H=t(6),K=t(13),G=t(51),J=t(682),Q=t(179),$=t(177),nn=t(108),ln=t(116),tn=t(111),on=t(77),an=t(15),un=r.X({encapsulation:2,styles:[],data:{}}),en=r.V("page-notificacion",b,function(n){return r._19(0,[(n()(),r.Z(0,0,null,null,1,"page-notificacion",[],null,null,null,e,un)),r.Y(1,49152,null,0,b,[F.a,d.a,p.a,c.a,nn.a,ln.a,tn.a,on.a,m.a,h.a,H.a,g.a,an.a],null,null)],null,null)},{},{},[]),rn=t(26),sn=t(170),cn=t(54);t.d(l,"NotificacionPageModuleNgFactory",function(){return dn});var dn=r.W(_,[],function(n){return r._7([r._8(512,r.i,r.S,[[8,[v.a,y.a,j.a,D.a,x.a,I.a,w.a,Z.a,k.a,en]],[3,r.i],r.s]),r._8(4608,L.k,L.j,[r.r,[2,L.s]]),r._8(4608,rn.q,rn.q,[]),r._8(4608,rn.d,rn.d,[]),r._8(512,L.b,L.b,[]),r._8(512,rn.o,rn.o,[]),r._8(512,rn.g,rn.g,[]),r._8(512,rn.m,rn.m,[]),r._8(512,sn.a,sn.a,[]),r._8(512,sn.b,sn.b,[]),r._8(512,_,_,[]),r._8(256,cn.a,b,[])])})},676:function(n,l,t){"use strict";function o(n){return i._19(2,[i._16(402653184,1,{_fixedContent:0}),i._16(402653184,2,{_scrollContent:0}),(n()(),i.Z(2,0,[[1,0],["fixedContent",1]],null,1,"div",[["class","fixed-content"]],null,null,null,null,null)),i._10(null,0),(n()(),i.Z(4,0,[[2,0],["scrollContent",1]],null,1,"div",[["class","scroll-content"]],null,null,null,null,null)),i._10(null,1),i._10(null,2)],null,null)}t.d(l,"a",function(){return a}),l.b=o;var i=t(2),a=(t(3),t(6),t(13),t(51),t(7),t(29),i.X({encapsulation:2,styles:[],data:{}}))},677:function(n,l,t){"use strict";function o(n){return i._19(2,[(n()(),i.Z(0,0,null,null,2,"div",[["class","toolbar-title"]],null,null,null,null,null)),i.Y(1,278528,null,0,a.g,[i.p,i.q,i.j,i.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i._10(null,0)],function(n,l){n(l,1,0,"toolbar-title","toolbar-title-"+l.component._mode)},null)}t.d(l,"a",function(){return u}),l.b=o;var i=t(2),a=t(23),u=(t(3),i.X({encapsulation:2,styles:[],data:{}}))},681:function(n,l,t){"use strict";function o(n){return i._19(2,[(n()(),i.Z(0,0,null,null,1,"ion-icon",[["class","fab-close-icon"],["name","close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),i.Y(1,147456,null,0,a.a,[u.a,i.j,i.z],{name:[0,"name"]},null),(n()(),i.Z(2,0,null,null,1,"span",[["class","button-inner"]],null,null,null,null,null)),i._10(null,0),(n()(),i.Z(4,0,null,null,0,"div",[["class","button-effect"]],null,null,null,null,null))],function(n,l){n(l,1,0,"close")},function(n,l){n(l,0,0,i._11(l,1)._hidden)})}t.d(l,"a",function(){return e}),l.b=o;var i=t(2),a=t(53),u=t(3),e=i.X({encapsulation:2,styles:[],data:{}})},682:function(n,l,t){"use strict";function o(n){return i._19(0,[i._10(null,0)],null,null)}t.d(l,"a",function(){return a}),l.b=o;var i=t(2),a=(t(6),i.X({encapsulation:2,styles:[],data:{}}))}});