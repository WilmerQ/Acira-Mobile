{"version":3,"sources":["../../src/pages/historial/historial.module.ts","../../src/pages/historial/historial.ts"],"names":[],"mappings":"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","file":"8.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { HistorialPage } from './historial';\n\n@NgModule({\n  declarations: [\n    HistorialPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(HistorialPage),\n  ],\n})\nexport class HistorialPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/historial/historial.module.ts","import { usuarioRegistro } from './../../models/usuarioRegistro';\nimport { objetoEventoHistorial } from './../../models/objetoEventoHistorial';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController } from 'ionic-angular';\nimport { OperacionesHttpProvider } from '../../providers/operaciones-http/operaciones-http';\nimport { Geolocation } from '@ionic-native/geolocation';\nimport { OperacionesLocalStorageProvider } from '../../providers/operaciones-local-storage/operaciones-local-storage';\nimport * as Raven from 'raven-js';\n/**\n * Generated class for the HistorialPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-historial',\n  templateUrl: 'historial.html',\n})\nexport class HistorialPage {\n\n  tipoAux: string = null;\n  tipo: string = null;\n  loading = this.loadingController.create({\n    spinner: 'ios',\n    content: 'Descargando, Por favor espere',\n  });\n  panico: objetoEventoHistorial[] = null;\n  map: any;\n  shownGroup = null;\n  identificacion: number;\n\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    public geolocation: Geolocation,\n    public localStorage: OperacionesLocalStorageProvider,\n    private httpProvider: OperacionesHttpProvider,\n    public loadingController: LoadingController) {\n    let temp: string = this.localStorage.getObject(\"usuarioLogin\");\n    let usuarioActivo: usuarioRegistro = JSON.parse(temp);\n    this.identificacion = usuarioActivo.identificacion;\n  }\n\n  listChange() {\n    this.loading = this.loadingController.create({\n      spinner: 'ios',\n      content: 'Descargando, Por favor espere',\n    });\n    this.loading.present();\n    if (this.tipo != null) {\n      this.tipoAux = this.tipo;\n      this.httpProvider.getHistorialXtipoEvento(this.tipo, this.identificacion).then(data => {\n        this.loading.dismiss();\n        this.panico = data;\n        /*for (let i: number = 0; i < this.panico.length; i++) {\n          console.log(\"objeto \" + this.panico[i].fechaRecolecion + \" i \" + i);\n        }*/\n      }).catch(error => {\n        Raven.captureException(error);\n        this.loading.dismiss();\n      });\n      this.tipo = null;\n    }\n  }\n\n  /*mapOptions = {\n    zoom: 15,\n    mapTypeId: google.maps.MapTypeId.ROADMAP\n  };*/\n\n  /*toggleGroup(group) {\n    if (this.isGroupShown(group)) {\n      this.shownGroup = null;\n    } else {\n      this.shownGroup = group;\n      for (let i = 0; i < this.panico.length; i++) {\n        var item = this.panico[i];\n        // search for opened item in the array of items\n        if (item.id == group) { // found item\n          // make latitude-longitude element\n          var myLatlng = new google.maps.LatLng(item.latitud, item.longitud);\n\n          // make map-element\n          this.map = null;\n          this.map = new google.maps.Map(document.getElementById('map' + item.id), this.mapOptions);\n          console.log(\"idmap \" + item.id);\n\n          // make marker-element\n          var marker = new google.maps.Marker({\n            position: myLatlng,\n            map: this.map\n          });\n\n          // resize map now\n          google.maps.event.trigger(this.map, 'resize');\n          this.map.setCenter(myLatlng);\n          this.map.setZoom(this.map.getZoom());\n\n          // resize map when map is idle.\n          google.maps.event.addListenerOnce(this.map, 'idle', () => {\n            //google.maps.event.addListenerOnce(map, 'idle', function () {\n            console.log(\"map idled, resizing\");\n            google.maps.event.trigger(this.map, 'resize');\n            this.map.setCenter(myLatlng);\n            this.map.setZoom(this.map.getZoom());\n          }); // shouldn't be making a function inside a loop but F it i'm trying everything, \n          break;\n        }\n      }\n      /*setTimeout(() => {\n        console.log(\"timeout, resizing\");\n        google.maps.event.trigger(this.map, \"resize\");\n        this.map.setCenter(myLatlng);\n        this.map.setZoom(this.map.getZoom());\n      }, 5000);*/\n  /*}\n};*/\n\n  isGroupShown(group) {\n    return this.shownGroup === group;\n  };\n\n  doRefresh(refresher) {\n    if (this.tipoAux != null) {\n      this.httpProvider.getHistorialXtipoEvento(this.tipoAux, this.identificacion).then(data => {\n        this.panico = null;\n        this.panico = data;\n        refresher.complete();\n      }).catch(error => {\n        Raven.captureException(error);\n        refresher.complete();\n      });\n    } else {\n      //console.log(\"else aqui en tipoaux\" + this.tipoAux);\n      refresher.complete();\n    }\n  }\n\n  enviarParametros(temp: objetoEventoHistorial) {\n    if (temp != null) {\n      this.navCtrl.push(\"MaphistorialPage\", { objeto: temp });\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/historial/historial.ts"],"sourceRoot":""}