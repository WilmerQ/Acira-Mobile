webpackJsonp([1],{674:function(n,l,e){"use strict";function i(n){return d._19(0,[(n()(),d.Z(0,0,null,null,2,"ion-title",[["class","color-header"]],null,null,null,R.b,R.a)),d.Y(1,49152,null,0,N.a,[E.a,d.j,d.z,[2,V.a],[2,U.a]],null,null),(n()(),d._18(2,0,[" "," "]))],null,function(n,l){n(l,2,0,l.component.usuarioActivo.nombreusuario)})}function t(n){return d._19(0,[(n()(),d.Z(0,0,null,null,1,"ion-icon",[["isActive","true"],["name","mic-off"],["role","img"]],[[2,"hide",null]],null,null,null,null)),d.Y(1,147456,null,0,F.a,[E.a,d.j,d.z],{name:[0,"name"],isActive:[1,"isActive"]},null)],function(n,l){n(l,1,0,"mic-off","true")},function(n,l){n(l,0,0,d._11(l,1)._hidden)})}function o(n){return d._19(0,[(n()(),d.Z(0,0,null,null,1,"ion-icon",[["name","mic"],["role","img"]],[[2,"hide",null]],null,null,null,null)),d.Y(1,147456,null,0,F.a,[E.a,d.j,d.z],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"mic")},function(n,l){n(l,0,0,d._11(l,1)._hidden)})}function a(n){return d._19(0,[(n()(),d.Z(0,0,null,null,5,"button",[["clear",""],["ion-button",""],["item-start",""],["large",""]],null,[[null,"click"]],function(n,l,e){var i=!0;if("click"===l){i=!1!==n.component.playAudio()&&i}return i},B.b,B.a)),d.Y(1,1097728,[[12,4]],0,G.a,[[8,""],E.a,d.j,d.z],{large:[0,"large"],clear:[1,"clear"]},null),(n()(),d._18(-1,0,["\n      "])),(n()(),d.Z(3,0,null,0,1,"ion-icon",[["name","play"],["role","img"]],[[2,"hide",null]],null,null,null,null)),d.Y(4,147456,null,0,F.a,[E.a,d.j,d.z],{name:[0,"name"]},null),(n()(),d._18(-1,0,["\n    "]))],function(n,l){n(l,1,0,"","");n(l,4,0,"play")},function(n,l){n(l,3,0,d._11(l,4)._hidden)})}function u(n){return d._19(0,[(n()(),d.Z(0,0,null,null,5,"button",[["clear",""],["ion-button",""],["item-start",""],["large",""]],null,[[null,"click"]],function(n,l,e){var i=!0;if("click"===l){i=!1!==n.component.stopAudio()&&i}return i},B.b,B.a)),d.Y(1,1097728,[[12,4]],0,G.a,[[8,""],E.a,d.j,d.z],{large:[0,"large"],clear:[1,"clear"]},null),(n()(),d._18(-1,0,["\n      "])),(n()(),d.Z(3,0,null,0,1,"ion-icon",[["name","pause"],["role","img"]],[[2,"hide",null]],null,null,null,null)),d.Y(4,147456,null,0,F.a,[E.a,d.j,d.z],{name:[0,"name"]},null),(n()(),d._18(-1,0,["\n    "]))],function(n,l){n(l,1,0,"","");n(l,4,0,"pause")},function(n,l){n(l,3,0,d._11(l,4)._hidden)})}function s(n){return d._19(0,[(n()(),d.Z(0,0,null,null,15,"ion-item",[["class","item item-block"],["no-lines",""],["no-padding",""]],null,null,null,q.b,q.a)),d.Y(1,1097728,null,3,M.a,[W.a,E.a,d.j,d.z,[2,J.a]],null,null),d._16(335544320,11,{contentLabel:0}),d._16(603979776,12,{_buttons:1}),d._16(603979776,13,{_icons:1}),d.Y(5,16384,null,0,H.a,[],null,null),(n()(),d._18(-1,2,["\n    "])),(n()(),d.Z(7,0,null,2,1,"p",[],null,null,null,null,null)),(n()(),d._18(-1,null,["Grabación de voz"])),(n()(),d._18(-1,2,["\n    "])),(n()(),d.U(16777216,null,0,1,null,a)),d.Y(11,16384,null,0,X.i,[d.I,d.F],{ngIf:[0,"ngIf"]},null),(n()(),d._18(-1,2,["\n    "])),(n()(),d.U(16777216,null,0,1,null,u)),d.Y(14,16384,null,0,X.i,[d.I,d.F],{ngIf:[0,"ngIf"]},null),(n()(),d._18(-1,2,["\n  "]))],function(n,l){var e=l.component;n(l,11,0,!e.reproduciendoAudio);n(l,14,0,e.reproduciendoAudio)},null)}function r(n){return d._19(0,[(n()(),d.Z(0,0,null,null,0,"img",[["style","width: 100%"]],[[8,"src",4]],null,null,null,null))],null,function(n,l){var e=l.component;n(l,0,0,d._2(1,"",e.pathForImage(e.lastImage),""))})}function c(n){return d._19(0,[(n()(),d._18(-1,null,["\n"])),(n()(),d.Z(1,0,null,null,43,"ion-header",[["no-padding",""]],null,null,null,null,null)),d.Y(2,16384,null,0,K.a,[E.a,d.j,d.z,[2,Q.a]],null,null),(n()(),d._18(-1,null,["\n  "])),(n()(),d.Z(4,0,null,null,39,"ion-navbar",[["class","toolbar"],["no-padding",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,$.b,$.a)),d.Y(5,49152,null,0,U.a,[nn.a,[2,Q.a],[2,ln.a],E.a,d.j,d.z],null,null),(n()(),d._18(-1,3,["\n    "])),(n()(),d.Z(7,0,null,3,35,"ion-grid",[["class","grid"],["no-padding",""]],null,null,null,null,null)),d.Y(8,16384,null,0,en.a,[],null,null),(n()(),d._18(-1,null,["\n      "])),(n()(),d.Z(10,0,null,null,31,"ion-row",[["class","row"],["margin-top",""]],null,null,null,null,null)),d.Y(11,16384,null,0,tn.a,[],null,null),(n()(),d._18(-1,null,["\n        "])),(n()(),d.Z(13,0,null,null,4,"ion-col",[["class","col"],["col-2",""],["style","height: 35px"]],null,null,null,null,null)),d.Y(14,16384,null,0,on.a,[],null,null),(n()(),d._18(-1,null,["\n          "])),(n()(),d.Z(16,0,null,null,0,"img",[["alt","logo"],["class","displayed"],["height","28"],["src","assets/img/logo_app.png"]],null,null,null,null,null)),(n()(),d._18(-1,null,["\n        "])),(n()(),d._18(-1,null,["\n        "])),(n()(),d.Z(19,0,null,null,5,"ion-col",[["class","col"]],null,null,null,null,null)),d.Y(20,16384,null,0,on.a,[],null,null),(n()(),d._18(-1,null,["\n          "])),(n()(),d.U(16777216,null,null,1,null,i)),d.Y(23,16384,null,0,X.i,[d.I,d.F],{ngIf:[0,"ngIf"]},null),(n()(),d._18(-1,null,["\n        "])),(n()(),d._18(-1,null,["\n        "])),(n()(),d.Z(26,0,null,null,14,"ion-col",[["class","col"],["col-2",""]],null,null,null,null,null)),d.Y(27,16384,null,0,on.a,[],null,null),(n()(),d._18(-1,null,["\n          "])),(n()(),d.Z(29,0,null,null,10,"ion-buttons",[["right",""]],null,null,null,null,null)),d.Y(30,16384,null,1,an.a,[E.a,d.j,d.z,[2,V.a],[2,U.a]],null,null),d._16(603979776,1,{_buttons:1}),(n()(),d._18(-1,null,["\n            "])),(n()(),d.Z(33,0,null,null,5,"button",[["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(n,l,e){var i=!0;if("click"===l){i=!1!==n.component.presentPopover(e)&&i}return i},B.b,B.a)),d.Y(34,1097728,[[1,4]],0,G.a,[[8,""],E.a,d.j,d.z],null,null),(n()(),d._18(-1,0,["\n              "])),(n()(),d.Z(36,0,null,0,1,"ion-icon",[["name","more"],["role","img"]],[[2,"hide",null]],null,null,null,null)),d.Y(37,147456,null,0,F.a,[E.a,d.j,d.z],{name:[0,"name"]},null),(n()(),d._18(-1,0,["\n            "])),(n()(),d._18(-1,null,["\n          "])),(n()(),d._18(-1,null,["\n        "])),(n()(),d._18(-1,null,["\n      "])),(n()(),d._18(-1,null,["\n    "])),(n()(),d._18(-1,3,["\n  "])),(n()(),d._18(-1,null,["\n"])),(n()(),d._18(-1,null,["\n\n"])),(n()(),d.Z(46,0,null,null,123,"ion-content",[["no-padding",""]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,un.b,un.a)),d.Y(47,4374528,null,0,sn.a,[E.a,rn.a,cn.a,d.j,d.z,nn.a,dn.a,d.u,[2,Q.a],[2,ln.a]],null,null),(n()(),d._18(-1,1,["\n  "])),(n()(),d.Z(49,0,null,1,40,"ion-grid",[["class","grid"],["margin",""],["padding",""]],null,null,null,null,null)),d.Y(50,16384,null,0,en.a,[],null,null),(n()(),d._18(-1,null,["\n    "])),(n()(),d.Z(52,0,null,null,36,"ion-row",[["class","row"]],null,null,null,null,null)),d.Y(53,16384,null,0,tn.a,[],null,null),(n()(),d._18(-1,null,["\n      "])),(n()(),d.Z(55,0,null,null,15,"ion-col",[["class","col"]],null,null,null,null,null)),d.Y(56,16384,null,0,on.a,[],null,null),(n()(),d._18(-1,null,["\n        "])),(n()(),d.Z(58,0,null,null,11,"ion-item",[["class","item item-block"],["no-lines",""],["tappable",""]],null,[[null,"click"]],function(n,l,e){var i=!0;if("click"===l){i=!1!==n.component.preconfirmarpanico()&&i}return i},q.b,q.a)),d.Y(59,1097728,null,3,M.a,[W.a,E.a,d.j,d.z,[2,J.a]],null,null),d._16(335544320,2,{contentLabel:0}),d._16(603979776,3,{_buttons:1}),d._16(603979776,4,{_icons:1}),d.Y(63,16384,null,0,H.a,[],null,null),(n()(),d._18(-1,2,["\n          "])),(n()(),d.Z(65,0,null,2,0,"img",[["alt","logo"],["class","displayed"],["height","129"],["ion-img",""],["src","assets/img/panico.png"]],null,null,null,null,null)),(n()(),d._18(-1,2,["\n          "])),(n()(),d.Z(67,0,null,2,1,"h1",[["text-center",""]],null,null,null,null,null)),(n()(),d._18(-1,null,["Pánico"])),(n()(),d._18(-1,2,["\n        "])),(n()(),d._18(-1,null,["\n      "])),(n()(),d._18(-1,null,["\n      "])),(n()(),d.Z(72,0,null,null,15,"ion-col",[["class","col"]],null,null,null,null,null)),d.Y(73,16384,null,0,on.a,[],null,null),(n()(),d._18(-1,null,["\n        "])),(n()(),d.Z(75,0,null,null,11,"ion-item",[["class","item item-block"],["no-lines",""],["tappable",""]],null,[[null,"click"]],function(n,l,e){var i=!0;if("click"===l){i=!1!==n.component.doSospecha()&&i}return i},q.b,q.a)),d.Y(76,1097728,null,3,M.a,[W.a,E.a,d.j,d.z,[2,J.a]],null,null),d._16(335544320,5,{contentLabel:0}),d._16(603979776,6,{_buttons:1}),d._16(603979776,7,{_icons:1}),d.Y(80,16384,null,0,H.a,[],null,null),(n()(),d._18(-1,2,["\n          "])),(n()(),d.Z(82,0,null,2,0,"img",[["alt","logo"],["class","displayed"],["height","129"],["ion-img",""],["src","assets/img/sospechoso.png"]],null,null,null,null,null)),(n()(),d._18(-1,2,["\n          "])),(n()(),d.Z(84,0,null,2,1,"h1",[["text-center",""]],null,null,null,null,null)),(n()(),d._18(-1,null,["Sospecha"])),(n()(),d._18(-1,2,["\n        "])),(n()(),d._18(-1,null,["\n      "])),(n()(),d._18(-1,null,["\n    "])),(n()(),d._18(-1,null,["\n  "])),(n()(),d._18(-1,1,["\n\n  "])),(n()(),d.Z(91,0,null,1,51,"ion-row",[["class","row"],["no-margin",""],["no-padding",""],["style","background: #dee2ed"]],null,null,null,null,null)),d.Y(92,16384,null,0,tn.a,[],null,null),(n()(),d._18(-1,null,["\n    "])),(n()(),d.Z(94,0,null,null,9,"ion-col",[["class","col"],["no-margin",""],["no-padding",""]],null,null,null,null,null)),d.Y(95,16384,null,0,on.a,[],null,null),(n()(),d._18(-1,null,["\n      "])),(n()(),d.Z(97,0,[["myInput",1]],null,5,"textarea",[["id","myInput"],["maxLength","150"],["no-margin",""],["no-padding",""],["outline",""],["placeholder","Escriba un mensaje de máximo 150 caracteres relatando lo que sucede."],["rows","5"],["style","background: #dee2ed"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,l,e){var i=!0,t=n.component;if("input"===l){i=!1!==d._11(n,98)._handleInput(e.target.value)&&i}if("blur"===l){i=!1!==d._11(n,98).onTouched()&&i}if("compositionstart"===l){i=!1!==d._11(n,98)._compositionStart()&&i}if("compositionend"===l){i=!1!==d._11(n,98)._compositionEnd(e.target.value)&&i}if("ngModelChange"===l){i=!1!==(t.mensaje=e)&&i}return i},null,null)),d.Y(98,16384,null,0,pn.c,[d.A,d.j,[2,pn.a]],null,null),d._14(1024,null,pn.h,function(n){return[n]},[pn.c]),d.Y(100,671744,null,0,pn.l,[[8,null],[8,null],[8,null],[2,pn.h]],{model:[0,"model"]},{update:"ngModelChange"}),d._14(2048,null,pn.i,null,[pn.l]),d.Y(102,16384,null,0,pn.j,[pn.i],null,null),(n()(),d._18(-1,null,["\n    "])),(n()(),d._18(-1,null,["\n\n    "])),(n()(),d.Z(105,0,null,null,36,"ion-col",[["class","col"],["col-auto",""],["no-margin",""],["no-padding",""]],null,null,null,null,null)),d.Y(106,16384,null,0,on.a,[],null,null),(n()(),d._18(-1,null,["\n      "])),(n()(),d.Z(108,0,null,null,13,"ion-row",[["class","row"],["no-margin",""],["no-padding",""]],null,null,null,null,null)),d.Y(109,16384,null,0,tn.a,[],null,null),(n()(),d._18(-1,null,["\n        "])),(n()(),d.Z(111,0,null,null,9,"ion-col",[["class","col"],["col-auto",""],["no-margin",""],["no-padding",""]],null,null,null,null,null)),d.Y(112,16384,null,0,on.a,[],null,null),(n()(),d._18(-1,null,["\n          "])),(n()(),d.Z(114,0,null,null,5,"button",[["clear",""],["icon-only",""],["ion-button",""],["no-margin",""],["no-padding",""],["style","width: 44px; height: 40px;background: #dee2ed"]],null,[[null,"click"]],function(n,l,e){var i=!0;if("click"===l){i=!1!==n.component.presentActionSheet()&&i}return i},B.b,B.a)),d.Y(115,1097728,null,0,G.a,[[8,""],E.a,d.j,d.z],{clear:[0,"clear"]},null),(n()(),d._18(-1,0,["\n            "])),(n()(),d.Z(117,0,null,0,1,"ion-icon",[["name","ios-camera"],["role","img"]],[[2,"hide",null]],null,null,null,null)),d.Y(118,147456,null,0,F.a,[E.a,d.j,d.z],{name:[0,"name"]},null),(n()(),d._18(-1,0,["\n          "])),(n()(),d._18(-1,null,["\n        "])),(n()(),d._18(-1,null,["\n      "])),(n()(),d._18(-1,null,["\n      "])),(n()(),d.Z(123,0,null,null,17,"ion-row",[["class","row"],["no-margin",""],["no-padding",""]],null,null,null,null,null)),d.Y(124,16384,null,0,tn.a,[],null,null),(n()(),d._18(-1,null,["\n        "])),(n()(),d.Z(126,0,null,null,13,"ion-col",[["class","col"],["col-auto",""],["no-margin",""],["no-padding",""]],null,null,null,null,null)),d.Y(127,16384,null,0,on.a,[],null,null),(n()(),d._18(-1,null,["\n          "])),(n()(),d.Z(129,0,null,null,9,"button",[["clear",""],["icon-only",""],["ion-button",""],["no-margin",""],["no-padding",""],["style","width: 44px; height: 40px; background: #dee2ed"]],null,[[null,"touchstart"],[null,"touchend"]],function(n,l,e){var i=!0,t=n.component;if("touchstart"===l){i=!1!==t.startRecord()&&i}if("touchend"===l){i=!1!==t.stopRecord()&&i}return i},B.b,B.a)),d.Y(130,1097728,null,0,G.a,[[8,""],E.a,d.j,d.z],{clear:[0,"clear"]},null),(n()(),d._18(-1,0,["\n            "])),(n()(),d._18(-1,0,["\n            "])),(n()(),d.U(16777216,null,0,1,null,t)),d.Y(134,16384,null,0,X.i,[d.I,d.F],{ngIf:[0,"ngIf"]},null),(n()(),d._18(-1,0,["\n            "])),(n()(),d.U(16777216,null,0,1,null,o)),d.Y(137,16384,null,0,X.i,[d.I,d.F],{ngIf:[0,"ngIf"]},null),(n()(),d._18(-1,0,["\n          "])),(n()(),d._18(-1,null,["\n        "])),(n()(),d._18(-1,null,["\n      "])),(n()(),d._18(-1,null,["\n    "])),(n()(),d._18(-1,null,["\n  "])),(n()(),d._18(-1,1,["\n\n  "])),(n()(),d.Z(144,0,null,1,17,"ion-item",[["class","item item-block"],["no-lines",""],["padding-left",""]],null,null,null,q.b,q.a)),d.Y(145,1097728,null,3,M.a,[W.a,E.a,d.j,d.z,[2,J.a]],null,null),d._16(335544320,8,{contentLabel:0}),d._16(603979776,9,{_buttons:1}),d._16(603979776,10,{_icons:1}),d.Y(149,16384,null,0,H.a,[],null,null),(n()(),d._18(-1,2,["\n    "])),(n()(),d.Z(151,0,null,1,2,"ion-label",[],null,null,null,null,null)),d.Y(152,16384,[[8,4]],0,hn.a,[E.a,d.j,d.z,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),d._18(-1,null,["¿Reportar de manera anónima?"])),(n()(),d._18(-1,2,["\n    "])),(n()(),d.Z(155,0,null,0,5,"ion-checkbox",[],[[2,"checkbox-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(n,l,e){var i=!0,t=n.component;if("click"===l){i=!1!==d._11(n,156)._click(e)&&i}if("ngModelChange"===l){i=!1!==(t.anonimato=e)&&i}return i},gn.b,gn.a)),d.Y(156,1228800,null,0,mn.a,[E.a,W.a,[2,M.a],d.j,d.z],null,null),d._14(1024,null,pn.h,function(n){return[n]},[mn.a]),d.Y(158,671744,null,0,pn.l,[[8,null],[8,null],[8,null],[2,pn.h]],{model:[0,"model"]},{update:"ngModelChange"}),d._14(2048,null,pn.i,null,[pn.l]),d.Y(160,16384,null,0,pn.j,[pn.i],null,null),(n()(),d._18(-1,2,["\n  "])),(n()(),d._18(-1,1,["\n\n  "])),(n()(),d.U(16777216,null,1,1,null,s)),d.Y(164,16384,null,0,X.i,[d.I,d.F],{ngIf:[0,"ngIf"]},null),(n()(),d._18(-1,1,["\n\n  "])),(n()(),d.U(16777216,null,1,1,null,r)),d.Y(167,16384,null,0,X.i,[d.I,d.F],{ngIf:[0,"ngIf"]},null),(n()(),d._18(-1,1,["\n\n  "])),(n()(),d._18(-1,1,["\n"]))],function(n,l){var e=l.component;n(l,23,0,null!=e.usuarioActivo);n(l,37,0,"more");n(l,100,0,e.mensaje);n(l,115,0,"");n(l,118,0,"ios-camera");n(l,130,0,"");n(l,134,0,e.recording);n(l,137,0,!e.recording);n(l,158,0,e.anonimato);n(l,164,0,!e.recording&&void 0!=e.fileName);n(l,167,0,e.mostrarImagen)},function(n,l){n(l,4,0,d._11(l,5)._hidden,d._11(l,5)._sbPadding);n(l,36,0,d._11(l,37)._hidden);n(l,46,0,d._11(l,47).statusbarPadding,d._11(l,47)._hasRefresher);n(l,97,0,d._11(l,102).ngClassUntouched,d._11(l,102).ngClassTouched,d._11(l,102).ngClassPristine,d._11(l,102).ngClassDirty,d._11(l,102).ngClassValid,d._11(l,102).ngClassInvalid,d._11(l,102).ngClassPending);n(l,117,0,d._11(l,118)._hidden);n(l,155,0,d._11(l,156)._disabled,d._11(l,160).ngClassUntouched,d._11(l,160).ngClassTouched,d._11(l,160).ngClassPristine,d._11(l,160).ngClassDirty,d._11(l,160).ngClassValid,d._11(l,160).ngClassInvalid,d._11(l,160).ngClassPending)})}Object.defineProperty(l,"__esModule",{value:!0});var d=e(2),p=(e(0),e(31),e(109)),h=e(168),g=function(){return function(n,l,e,i,t,o,a){this.accuracy=n,this.altitude=l,this.altitudeAccuracy=e,this.heading=i,this.latitude=t,this.longitude=o,this.speed=a}}(),m=e(193),f=e(110),_=e(174),b=e(194),v=e(182),y=e(171),C=e(183),A=e(172),P=e(370),j=e(175),I=e(173),x=function(){function n(n,l,i,t,o,a,u,s,r,c,d,p,h,g,m,f,_,b,v){var y=this;this.navCtrl=n,this.localstorage=l,this.alertCtrl=i,this.navParams=t,this.popoverCtrl=o,this.geolocation=a,this.diagnostico=u,this.loadingController=s,this.toastCtl=r,this.operacionesLogin=c,this.push=d,this.platform=p,this.camera=h,this.actionSheetCtrl=g,this.transfer=m,this.file=f,this.media=_,this.filePath=b,this.network=v,this.minutoPenalizado=5,this.anonimato=!1,this.posicionActual=null,this.precision=null,this.uuidv4=e(683),this.Conexion=new P.a,this.recording=!1,this.reproduciendoAudio=!1,this.changeLocationState=function(n){y.diagnostico.isLocationEnabled().then(function(n){n?(y.ubicacion(!0),y.loading.dismiss()):(y.loading=y.loadingController.create({spinner:"ios",content:"Por favor encienda la ubicación en su dispositivo",dismissOnPageChange:!0}),y.loading.present())}).catch(function(n){return I.captureException(n)})},this.cancelLocationState=function(n){return console.log("cambio de estado de ubicacion: "+n),!1},this.loading=this.loadingController.create({spinner:"ios",content:"Por favor encienda la ubicación en su dispositivo",dismissOnPageChange:!0});var C=l.getObject("rutadirecta"),A=l.getObject("rutaauto");null==C&&null==A&&(l.guardarObjeto("rutadirecta",!0),l.guardarObjeto("rutaauto",!1)),this.onResumeSubscription=p.resume.subscribe(function(){setTimeout(function(){y.magia()},500)})}return n.prototype.ionViewDidEnter=function(){var n=this;"ok"==this.navParams.get("cerrarSesionOk")&&this.cerrarSesion(),this.diagnostico.isLocationEnabled().then(function(l){l?(n.ubicacion(!0),n.loading.dismiss()):n.loading.present()}).catch(function(n){return I.captureException(n)}),this.diagnostico.registerLocationStateChangeHandler(this.changeLocationState),setTimeout(function(){n.magia()},500)},n.prototype.ionViewDidLoad=function(){console.log("*****************aqui en ionViewDidLoad"),this.notificacionPush()},n.prototype.ionViewCanEnter=function(){var n=this.localstorage.getObject("usuarioLogin");this.usuarioActivo=JSON.parse(n),null!=this.usuarioActivo&&null==this.localstorage.getObject("rootPage")&&this.localstorage.guardar("rootPage","principal")},n.prototype.ionViewWillEnter=function(){},n.prototype.ionViewWillUnload=function(){this.onResumeSubscription.unsubscribe()},n.prototype.magia=function(){var n=this.localstorage.getObject("notificacion1");if(null!=n&&n.length>1){var l=JSON.parse(n);void 0!=n&&this.navCtrl.push("NotificacionPage",{notificacion:l})}},n.prototype.notificacionPush=function(){var n=this;this.push.hasPermission().then(function(n){n.isEnabled?console.log("We have permission to send push notifications"):console.log("We do not have permission to send push notifications")});this.pushObject=this.push.init({android:{icon:"notification"},ios:{alert:"true",badge:!0,sound:"false"},windows:{},browser:{pushServiceURL:"http://push.api.phonegap.com/v1/push"}}),this.pushObject.on("notification").subscribe(function(l){if("cierraSesion"==l.additionalData.comandosSecundarios.estado){if(l.additionalData.foreground){n.toastCtl.create({message:"Se ha detectado que se ha iniciado sesión en otro dispositivo diferente, si desea seguir utilizando la aplicación vuelva a iniciar sesión",position:"middle",closeButtonText:"ok",showCloseButton:!0,dismissOnPageChange:!1}).present()}l=null,n.cerrarSesion()}if(l.additionalData.foreground){n.alertCtrl.create({title:l.title,message:l.message,buttons:[{text:"Ignorar",handler:function(){}},{text:"Ver Mapa",handler:function(){n.navCtrl.push("NotificacionPage",{notificacion:l})}}]}).present()}}),this.pushObject.on("registration").subscribe(function(l){n.operacionesLogin.registrarDispositivoFCM(n.usuarioActivo,l.registrationId,n.localstorage.getObject("idDispositivo")).then(function(l){n.toastCtl.create({message:l.mensaje,duration:3e3,position:"middle"}).present()}).catch(function(l){if(I.captureException(l),"cierraSesion"===l._body){n.toastCtl.create({message:"Se ha detectado que se ha iniciado sesión en otro dispositivo diferente, si desea seguir utilizando la aplicación vuelva a iniciar sesión ",position:"middle",closeButtonText:"ok",showCloseButton:!0,dismissOnPageChange:!1}).present(),n.cerrarSesion()}else if("Se ha detectado un problema, por favor reinicie la aplicación"===l._body||"Problema interno del servidor"===l._body){n.toastCtl.create({message:"Por cuestiones de seguridad se debe iniciar sesión nuevamente.",position:"middle",closeButtonText:"ok",showCloseButton:!0,dismissOnPageChange:!1}).present(),n.cerrarSesion()}})}),window.approve=function(n){console.log("approve called ----------------"),console.log("aqui el json de data "+JSON.stringify(n)),window.localStorage.setItem("notificacion1",JSON.stringify(n[0]))},window.reject=function(n){console.log("Reject called ---------------------")},this.pushObject.on("error").subscribe(function(n){return console.error("Error with Push plugin",n)})},n.prototype.ubicacion=function(n){var l=this,e=this.geolocation.watchPosition({enableHighAccuracy:!0,maximumAge:0}).filter(function(n){return void 0!==n.coords}).subscribe(function(n){l.precision=n.coords.accuracy,n.coords.accuracy<25&&(l.posicionActual=n.coords)});n||e.unsubscribe()},n.prototype.showConfirm=function(){var n=this;this.alertCtrl.create({title:"¿Desea cerrar sesión en este dispositivo?",message:"Si cierra sesión no podrá recibir las notificaciones de reportes de otros usuarios",buttons:[{text:"Cancelar",handler:function(){}},{text:"Aceptar",handler:function(){n.cerrarSesion()}}]}).present()},n.prototype.preconfirmarpanico=function(){var n=this;this.alertCtrl.create({title:"¿Reportar pánico?",message:"A continuación, se activarán las sirenas de alta potencia, se recomienda realizar una descripción de voz o de texto sobre la situación.",buttons:[{text:"NO",handler:function(){}},{text:"SI",handler:function(){n.doPanico()}}]}).present()},n.prototype.presentPopover=function(n){var l=this,e=this.popoverCtrl.create("PopoverPage",{tipo:"general"});e.onDidDismiss(function(n){null!=n&&"cerrarSesion"==n&&l.showConfirm()}),e.present({ev:n})},n.prototype.cerrarSesion=function(){this.pushObject.unregister(),this.localstorage.delete("rootPage"),this.localstorage.delete("usuarioLogin"),this.navCtrl.setRoot("TabsPage",{objeto:"cerrarSesion"})},n.prototype.doPanico=function(){var n=this;this.loading=this.loadingController.create({spinner:"ios",content:"Reportando...",dismissOnPageChange:!0}),this.loading.present();var l=this.localstorage.getObject("fechaReporte");if(null==l)if(null!=this.posicionActual){var e=new g(this.posicionActual.accuracy,this.posicionActual.altitude,this.posicionActual.altitudeAccuracy,this.posicionActual.heading,this.posicionActual.latitude,this.posicionActual.longitude,this.posicionActual.speed);this.operacionesLogin.enviarpanico(this.usuarioActivo,this.mensaje,e,this.anonimato,this.uuidImagen,this.uuidGrabacionVoz).then(function(l){var e=new Date;n.localstorage.guardar("fechaReporte",e.getTime().toString()),n.loading.dismiss();n.toastCtl.create({message:l.mensaje,duration:3e3,position:"middle"}).present(),n.mostrarImagen=!1,n.fileName=void 0,n.mensaje=""}).catch(function(l){if(I.captureException(l),n.loading.dismiss(),"Se ha detectado un problema, por favor reinicie la aplicación"===l._body||"Intente nuevamente"===l._body||"Problema interno del servidor"===l._body){n.toastCtl.create({message:l._body,duration:3e3,position:"middle"}).present()}else{n.toastCtl.create({message:"Error desconocido, verifique su conexión a internet.",duration:3e3,position:"middle"}).present()}})}else{this.loading.dismiss();this.toastCtl.create({message:"La precisión de la ubicación mínima es de 25 metros y el GPS en este momento tiene una precisión "+this.precision,position:"middle",closeButtonText:"ok",showCloseButton:!0,dismissOnPageChange:!1}).present()}else{if((new Date).getTime()-l<60*this.minutoPenalizado*1e3){this.loading.dismiss();this.toastCtl.create({message:"Usted ya ha reportado en los últimos 5 minutos, espere ese mínimo lapso de tiempo para volver a realizarlo ",duration:4e3,position:"middle"}).present()}else if(null!=this.posicionActual){e=new g(this.posicionActual.accuracy,this.posicionActual.altitude,this.posicionActual.altitudeAccuracy,this.posicionActual.heading,this.posicionActual.latitude,this.posicionActual.longitude,this.posicionActual.speed);this.operacionesLogin.enviarpanico(this.usuarioActivo,this.mensaje,e,this.anonimato,this.uuidImagen,this.uuidGrabacionVoz).then(function(l){var e=new Date;n.localstorage.guardar("fechaReporte",e.getTime().toString()),n.loading.dismiss();n.toastCtl.create({message:l.mensaje,duration:2e3,position:"middle"}).present(),n.mensaje="",n.fileName=void 0,n.mostrarImagen=!1}).catch(function(l){if(I.captureException(l),n.loading.dismiss(),"Se ha detectado un problema, por favor reinicie la aplicación"===l._body||"Intente nuevamente"===l._body||"Problema interno del servidor"===l._body){n.toastCtl.create({message:l._body,duration:3e3,position:"middle"}).present()}else{n.toastCtl.create({message:"Error desconocido, verifique su conexión a internet.",duration:3e3,position:"middle"}).present()}})}else{this.loading.dismiss();this.toastCtl.create({message:"La precisión de la ubicación mínima es de 25 metros y el GPS en este momento tiene una precisión "+this.precision,position:"middle",closeButtonText:"ok",showCloseButton:!0,dismissOnPageChange:!1}).present()}}},n.prototype.doSospecha=function(){var n=this,l=this.loadingController.create({spinner:"ios",content:"Reportando...",dismissOnPageChange:!0});if(l.present(),(void 0==this.mensaje||this.mensaje.length<10)&&void 0==this.audio){l.dismiss();this.toastCtl.create({message:"Debe ingresar una breve descripción del reporte o grabe una nota de voz.",duration:3500,position:"middle"}).present()}else{var e=this.localstorage.getObject("fechaReporte");if(null==e)if(null!=this.posicionActual){var i=new g(this.posicionActual.accuracy,this.posicionActual.altitude,this.posicionActual.altitudeAccuracy,this.posicionActual.heading,this.posicionActual.latitude,this.posicionActual.longitude,this.posicionActual.speed);this.operacionesLogin.enviarSospecha(this.usuarioActivo,this.mensaje,i,this.anonimato,this.uuidImagen,this.uuidGrabacionVoz).then(function(e){var i=new Date;n.localstorage.guardar("fechaReporte",i.getTime().toString()),l.dismiss();n.toastCtl.create({message:e.mensaje,duration:3e3,position:"middle"}).present(),n.fileName=void 0,n.mostrarImagen=!1,n.mensaje=""}).catch(function(e){if(I.captureException(e),l.dismiss(),"Se ha detectado un problema, por favor reinicie la aplicación"===e._body||"Intente nuevamente"===e._body||"Problema interno del servidor"===e._body){n.toastCtl.create({message:e._body,duration:3e3,position:"middle"}).present()}else{n.toastCtl.create({message:"Error desconocido, verifique su conexión a internet.",duration:3e3,position:"middle"}).present()}})}else{l.dismiss();this.toastCtl.create({message:"La precisión de la ubicación mínima es de 25 metros y el GPS en este momento tiene una precisión "+this.precision,position:"middle",closeButtonText:"ok",showCloseButton:!0,dismissOnPageChange:!1}).present()}else{if((new Date).getTime()-e<60*this.minutoPenalizado*1e3){l.dismiss();this.toastCtl.create({message:"Usted ya ha reportado en los últimos 5 minutos, espere ese mínimo lapso de tiempo para volver a realizarlo ",duration:4e3,position:"middle"}).present()}else if(null!=this.posicionActual){i=new g(this.posicionActual.accuracy,this.posicionActual.altitude,this.posicionActual.altitudeAccuracy,this.posicionActual.heading,this.posicionActual.latitude,this.posicionActual.longitude,this.posicionActual.speed);this.operacionesLogin.enviarSospecha(this.usuarioActivo,this.mensaje,i,this.anonimato,this.uuidImagen,this.uuidGrabacionVoz).then(function(e){var i=new Date;n.localstorage.guardar("fechaReporte",i.getTime().toString()),l.dismiss();n.toastCtl.create({message:e.mensaje,duration:2e3,position:"middle"}).present(),n.mensaje="",n.mostrarImagen=!1,n.fileName=void 0}).catch(function(e){if(I.captureException(e),l.dismiss(),"Se ha detectado un problema, por favor reinicie la aplicación"===e._body||"Intente nuevamente"===e._body||"Problema interno del servidor"===e._body){n.toastCtl.create({message:e._body,duration:3e3,position:"middle"}).present()}else{n.toastCtl.create({message:"Error desconocido, verifique su conexión a internet.",duration:3e3,position:"middle"}).present()}})}else{l.dismiss();this.toastCtl.create({message:"La precisión de la ubicación mínima es de 25 metros y el GPS en este momento tiene una precisión "+this.precision,position:"middle",closeButtonText:"ok",showCloseButton:!0,dismissOnPageChange:!1}).present()}}}},n.prototype.presentActionSheet=function(){var n=this;this.actionSheetCtrl.create({enableBackdropDismiss:!0,title:"Seleccionar fuente de la imagen",buttons:[{icon:"ios-image",text:"Cargar desde la Galeria",handler:function(){n.takePicture(n.camera.PictureSourceType.PHOTOLIBRARY)}},{icon:"ios-camera",text:"Usar Camara",handler:function(){n.takePicture(n.camera.PictureSourceType.CAMERA)}},{icon:"close",text:"Cancelar",role:"cancel"}]}).present()},n.prototype.takePicture=function(n){var l=this;this.camera.getPicture({quality:100,sourceType:n,saveToPhotoAlbum:!0,correctOrientation:!0}).then(function(e){if(l.uuid=l.uuidv4(),l.platform.is("android")&&n===l.camera.PictureSourceType.PHOTOLIBRARY)l.filePath.resolveNativePath(e).then(function(n){var i=n.substr(0,n.lastIndexOf("/")+1),t=e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("?"));l.copyFileToLocalDir(i,t,l.createFileName()),l.uuidImagen=l.uuid});else{var i=e.substr(e.lastIndexOf("/")+1),t=e.substr(0,e.lastIndexOf("/")+1);l.copyFileToLocalDir(t,i,l.createFileName()),l.uuidImagen=l.uuid}},function(n){l.presentToast("No se seleccionó ninguna fotografía.")})},n.prototype.createFileName=function(){return(new Date).getTime()+".jpg"},n.prototype.copyFileToLocalDir=function(n,l,e){var i=this;this.file.copyFile(n,l,this.file.dataDirectory,e).then(function(n){i.lastImage=e,i.mostrarImagen=!0,i.uploadImage()},function(n){i.presentToast("Error while storing file.")})},n.prototype.presentToast=function(n){this.toastCtl.create({message:n,duration:3e3,position:"top"}).present()},n.prototype.presentToastPos=function(n,l){this.toastCtl.create({message:n,duration:2e3,position:l}).present()},n.prototype.pathForImage=function(n){return null===n?"":this.file.dataDirectory+n},n.prototype.uploadImage=function(){var n=this,l=this.Conexion.urlWebServices+"eventos/subirfoto",e=this.pathForImage(this.lastImage),i={fileKey:"file",fileName:this.uuidImagen+".jpg",httpMethod:"POST",mimeType:"multipart/form-data",params:{UUID:this.uuidImagen}};this.transfer.create().upload(e,l,i).then(function(l){n.loading.dismissAll(),n.presentToast("Imagen cargada con éxito.")},function(l){n.loading.dismissAll(),n.presentToast("Error al cargar el archivo.")})},n.prototype.startRecord=function(){this.uuidGrabacionVoz=this.uuidv4(),this.platform.is("ios")?(this.fileName="grabacion-"+this.uuidGrabacionVoz+".3gp",this.filePath2=this.file.documentsDirectory.replace(/file:\/\//g,"")+this.fileName,this.audio=this.media.create(this.filePath2)):this.platform.is("android")&&(this.fileName="grabacion-"+this.uuidGrabacionVoz+".3gp",this.filePath2=this.file.externalDataDirectory.replace(/file:\/\//g,"")+this.fileName,this.audio=this.media.create(this.filePath2)),this.audio.startRecord(),this.recording=!0,this.presentToastPos("Presione para Grabar, Suelte para guardar","bottom")},n.prototype.stopRecord=function(){this.audio.stopRecord(),this.recording=!1,this.uploadAudio()},n.prototype.playAudio=function(){var n=this;this.platform.is("ios")?(this.filePath2=this.file.documentsDirectory.replace(/file:\/\//g,"")+this.fileName,this.audio=this.media.create(this.filePath2)):this.platform.is("android")&&(this.filePath2=this.file.externalDataDirectory.replace(/file:\/\//g,"")+this.fileName,this.audio=this.media.create(this.filePath2)),this.audio.play(),this.audio.setVolume(.9),this.reproduciendoAudio=!0,this.audio.onStatusUpdate.subscribe(function(l){console.log("aqui en el status del audio "+l),4==l&&(n.reproduciendoAudio=!1)})},n.prototype.uploadAudio=function(){var n=this,l=this.Conexion.urlWebServices+"eventos/subirAudio",e={fileKey:"file",fileName:this.uuidGrabacionVoz+".3gp",httpMethod:"POST",mimeType:"multipart/form-data",params:{UUID:this.uuidGrabacionVoz}};this.transfer.create().upload(this.filePath2,l,e).then(function(l){n.loading.dismissAll(),n.presentToast("Grabación cargada con éxito.")},function(l){n.loading.dismissAll(),n.presentToast("Error al cargar el archivo.")})},n.prototype.stopAudio=function(){this.audio.pause(),this.reproduciendoAudio=!1},n}(),S=function(){return function(){}}(),Y=e(360),w=e(361),Z=e(362),k=e(363),O=e(364),z=e(365),T=e(366),D=e(367),L=e(368),R=e(677),N=e(169),E=e(3),V=e(74),U=e(47),F=e(53),B=e(52),G=e(30),q=e(371),M=e(27),W=e(24),J=e(57),H=e(113),X=e(23),K=e(112),Q=e(7),$=e(369),nn=e(12),ln=e(29),en=e(184),tn=e(177),on=e(176),an=e(185),un=e(676),sn=e(36),rn=e(6),cn=e(13),dn=e(51),pn=e(26),hn=e(56),gn=e(686),mn=e(178),fn=e(111),_n=e(15),bn=e(116),vn=e(108),yn=e(115),Cn=e(114),An=d.X({encapsulation:2,styles:[],data:{}}),Pn=d.V("page-principal",x,function(n){return d._19(0,[(n()(),d.Z(0,0,null,null,1,"page-principal",[],null,null,null,c,An)),d.Y(1,49152,null,0,x,[ln.a,h.a,fn.a,_n.a,bn.a,f.a,_.a,vn.a,yn.a,p.a,b.a,rn.a,v.a,Cn.a,y.a,A.a,j.a,C.a,m.a],null,null)],null,null)},{},{},[]),jn=e(170),In=e(54);e.d(l,"PrincipalPageModuleNgFactory",function(){return xn});var xn=d.W(S,[],function(n){return d._7([d._8(512,d.i,d.S,[[8,[Y.a,w.a,Z.a,k.a,O.a,z.a,T.a,D.a,L.a,Pn]],[3,d.i],d.s]),d._8(4608,X.k,X.j,[d.r,[2,X.s]]),d._8(4608,pn.q,pn.q,[]),d._8(4608,pn.d,pn.d,[]),d._8(512,X.b,X.b,[]),d._8(512,pn.o,pn.o,[]),d._8(512,pn.g,pn.g,[]),d._8(512,pn.m,pn.m,[]),d._8(512,jn.a,jn.a,[]),d._8(512,jn.b,jn.b,[]),d._8(512,S,S,[]),d._8(256,In.a,x,[])])})},676:function(n,l,e){"use strict";function i(n){return t._19(2,[t._16(402653184,1,{_fixedContent:0}),t._16(402653184,2,{_scrollContent:0}),(n()(),t.Z(2,0,[[1,0],["fixedContent",1]],null,1,"div",[["class","fixed-content"]],null,null,null,null,null)),t._10(null,0),(n()(),t.Z(4,0,[[2,0],["scrollContent",1]],null,1,"div",[["class","scroll-content"]],null,null,null,null,null)),t._10(null,1),t._10(null,2)],null,null)}e.d(l,"a",function(){return o}),l.b=i;var t=e(2),o=(e(3),e(6),e(13),e(51),e(7),e(29),t.X({encapsulation:2,styles:[],data:{}}))},677:function(n,l,e){"use strict";function i(n){return t._19(2,[(n()(),t.Z(0,0,null,null,2,"div",[["class","toolbar-title"]],null,null,null,null,null)),t.Y(1,278528,null,0,o.g,[t.p,t.q,t.j,t.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t._10(null,0)],function(n,l){n(l,1,0,"toolbar-title","toolbar-title-"+l.component._mode)},null)}e.d(l,"a",function(){return a}),l.b=i;var t=e(2),o=e(23),a=(e(3),t.X({encapsulation:2,styles:[],data:{}}))},683:function(n,l,e){var i=e(684),t=e(685);n.exports=function(n,l,e){var o=l&&e||0;"string"==typeof n&&(l="binary"==n?new Array(16):null,n=null);var a=(n=n||{}).random||(n.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,l)for(var u=0;u<16;++u)l[o+u]=a[u];return l||t(a)}},684:function(n,l,e){(function(l){var e,i=l.crypto||l.msCrypto;if(i&&i.getRandomValues){var t=new Uint8Array(16);e=function(){return i.getRandomValues(t),t}}if(!e){var o=new Array(16);e=function(){for(var n,l=0;l<16;l++)0==(3&l)&&(n=4294967296*Math.random()),o[l]=n>>>((3&l)<<3)&255;return o}}n.exports=e}).call(l,e(38))},685:function(n,l){for(var e=[],i=0;i<256;++i)e[i]=(i+256).toString(16).substr(1);n.exports=function(n,l){var i=l||0;return e[n[i++]]+e[n[i++]]+e[n[i++]]+e[n[i++]]+"-"+e[n[i++]]+e[n[i++]]+"-"+e[n[i++]]+e[n[i++]]+"-"+e[n[i++]]+e[n[i++]]+"-"+e[n[i++]]+e[n[i++]]+e[n[i++]]+e[n[i++]]+e[n[i++]]+e[n[i++]]}},686:function(n,l,e){"use strict";function i(n){return t._19(0,[(n()(),t.Z(0,0,null,null,1,"div",[["class","checkbox-icon"]],[[2,"checkbox-checked",null]],null,null,null,null)),(n()(),t.Z(1,0,null,null,0,"div",[["class","checkbox-inner"]],null,null,null,null,null)),(n()(),t.Z(2,0,null,null,2,"button",[["class","item-cover"],["ion-button","item-cover"],["role","checkbox"],["type","button"]],[[8,"id",0],[1,"aria-checked",0],[1,"aria-labelledby",0],[1,"aria-disabled",0]],null,null,o.b,o.a)),t.Y(3,1097728,null,0,a.a,[[8,"item-cover"],u.a,t.j,t.z],null,null),(n()(),t._18(-1,0,[" "]))],null,function(n,l){var e=l.component;n(l,0,0,e._value);n(l,2,0,e.id,e._value,e._labelId,e._disabled)})}e.d(l,"a",function(){return s}),l.b=i;var t=e(2),o=e(52),a=e(30),u=e(3),s=(e(24),t.X({encapsulation:2,styles:[],data:{}}))}});