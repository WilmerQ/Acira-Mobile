<!--
  Generated template for the PrincipalPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header no-padding>
  <ion-navbar no-padding>
    <ion-grid no-padding>
      <ion-row margin-top>
        <ion-col col-2 style="height: 35px">
          <img alt="logo" class="displayed" height="28" src="assets/img/logo_app.png">
        </ion-col>
        <ion-col>
          <ion-title class="color-header" *ngIf="usuarioActivo != null"> {{ usuarioActivo.nombreusuario }} </ion-title>
        </ion-col>
        <ion-col col-2>
          <ion-buttons right>
            <button ion-button icon-only (click)="presentPopover($event)">
              <ion-icon name="more"></ion-icon>
            </button>
          </ion-buttons>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-navbar>
</ion-header>

<ion-content no-padding>
  <ion-grid padding margin>
    <ion-row>
      <ion-col>
        <ion-item no-lines tappable (click)="preconfirmarpanico()">
          <img ion-img alt="logo" class="displayed" height="129" src="assets/img/panico.png">
          <h1 text-center>Pánico</h1>
        </ion-item>
      </ion-col>
      <ion-col>
        <ion-item no-lines tappable (click)="doSospecha()">
          <img ion-img alt="logo" class="displayed" height="129" src="assets/img/sospechoso.png">
          <h1 text-center>Sospecha</h1>
        </ion-item>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-row no-margin no-padding style="background: #dee2ed">
    <ion-col no-margin no-padding>
      <textarea outline no-margin no-padding #myInput id="myInput" style="background: #dee2ed" placeholder="Escriba un mensaje de máximo 150 caracteres relatando lo que sucede."
        rows="5" maxLength="150" [(ngModel)]="this.mensaje"></textarea>
    </ion-col>

    <ion-col col-auto no-padding no-margin>
      <ion-row no-padding no-margin>
        <ion-col col-auto no-padding no-margin>
          <button no-margin no-padding ion-button icon-only clear (click)="presentActionSheet()" style="width: 44px; height: 40px;background: #dee2ed">
            <ion-icon name="ios-camera"></ion-icon>
          </button>
        </ion-col>
      </ion-row>
      <ion-row no-padding no-margin>
        <ion-col col-auto no-padding no-margin>
          <button (touchstart)="startRecord()" (touchend)="stopRecord()" no-margin no-padding ion-button icon-only
            clear style="width: 44px; height: 40px; background: #dee2ed">
            <!--<ion-icon  name="ios-mic"></ion-icon>-->
            <ion-icon *ngIf="recording" isActive="true" name="mic-off"></ion-icon>
            <ion-icon *ngIf="!recording" name="mic"></ion-icon>
          </button>
        </ion-col>
      </ion-row>
    </ion-col>
  </ion-row>

  <ion-item padding-left no-lines>
    <ion-label>¿Reportar de manera anónima?</ion-label>
    <ion-checkbox [(ngModel)]="this.anonimato"></ion-checkbox>
  </ion-item>

  <ion-item *ngIf="!recording && fileName != undefined" no-padding no-lines>
    <p>Grabación de voz</p>
    <button ion-button clear item-start large (click)="playAudio()" *ngIf="!reproduciendoAudio">
      <ion-icon name="play"></ion-icon>
    </button>
    <button ion-button clear item-start large (click)="stopAudio()" *ngIf="reproduciendoAudio">
      <ion-icon name="pause"></ion-icon>
    </button>
  </ion-item>

  <img src="{{pathForImage(lastImage)}}" style="width: 100%" *ngIf="mostrarImagen">

  <!--<ion-fab right bottom>
    <button ion-fab mini no-padding no-margin large color="danger" (click)="showConfirm()">
      <ion-icon name="log-out"></ion-icon>
    </button>
  </ion-fab>
  -->
</ion-content>